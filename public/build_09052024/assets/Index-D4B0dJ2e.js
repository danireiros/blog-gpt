import{j as N,z as H,o as n,d as a,a as t,m as w,h as j,n as R,g as C,i as B,T as S,r as F,p as u,e as f,t as c,F as b,f as y,c as k,w as d,k as I,A as $,b as p,O as M,Z as V}from"./app-BjkeQK_V.js";import{_ as O}from"./BlogLayout-DCcNUokv.js";import{P}from"./Pagination-D3BNdIm4.js";import{_ as T,a as U}from"./ResponsiveNavLink-BQJW1pNG.js";import{_ as E}from"./InputLabel-Brj-c5Jh.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"mb-4 mt-4 text-2xl font-bold tracking-tight text-gray-700 dark:text-white"},z={class:"md:mt-0 w-100"},A={class:"grid grid-cols-6 gap-6"},q={key:0,class:"flex items-center justify-end text-end sm:rounded-bl-md sm:rounded-br-md"},W={__name:"FormSection2",emits:["submitted"],setup(r){const i=N(()=>!!H().actions);return(e,l)=>(n(),a("div",null,[t("h2",Z,[w(e.$slots,"title")]),t("div",z,[t("form",{onSubmit:l[0]||(l[0]=j(x=>e.$emit("submitted"),["prevent"]))},[t("div",{class:R(["",i.value?"sm:rounded-tl-md sm:rounded-tr-md":"sm:rounded-md"])},[t("div",A,[w(e.$slots,"form")])],2),i.value?(n(),a("div",q,[w(e.$slots,"actions")])):C("",!0)],32)])]))}},G={data(){return{form:{text:""}}},computed:{caracteresRestantes(){return this.form.text===null?200:200-this.form.text.length}},components:{Link:B,FormSection2:W,InputLabel:E,useForm:S,NavLink:T},props:{errors:Object,comments:Object,post_id:Number,user:String},methods:{formatDate(r){const i=new Date(r);let e={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(void 0,e).format(i)}},setup(r){const i=S({text:null,parent_comment_id:null,post_id:r.post_id},{preserveState:!0,preserveScroll:!0}),e=F(null),l=async m=>{try{const h=await axios.post(route("comments.like",m)),{likes:s}=h.data,o=r.comments.findIndex(L=>L.id===m);o!==-1&&(r.comments[o].likes=s)}catch(h){console.error("Error al dar like al comentario:",h)}},x=m=>{e.value=m,document.querySelector("#comment-textarea").scrollIntoView({behavior:"smooth"}),i.parent_comment_id=m},_=async()=>{try{e.value!==null&&(i.parent_comment_id=e.value),await M.post(route("comments.store",i)),i.reset(),e.value=null}catch(m){console.error("Error al enviar el comentario:",m)}},g=()=>{e.value=null,i.parent_comment_id=null},v=N(()=>r.user==="logged");return{form:i,submit:_,likeComment:l,replyToComment:x,replyingTo:e,cancelReply:g,isLoggedIn:v}}},J={class:"container mt-0 m-auto p-5 pt-0"},K={class:"mb-4 mt-0 text-2xl font-bold tracking-tight text-gray-700 dark:text-white"},Q={key:0},X={key:1},Y={key:0},tt={class:"w-100 inline-flex"},et=["src"],ot={class:"ml-4 mt-1 font-bold"},st={class:"ml-4 mt-1 text-gray-400"},nt={class:"text-gray-500",style:{"font-weight":"500"}},rt={class:"mb-8 inline-flex text-indigo-300"},at=["onClick"],it=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"},null,-1),lt=[it],ct=["onClick"],dt={key:0},mt={class:"w-100 inline-flex"},ut=["src"],_t={class:"ml-4 mt-1 font-bold"},ht={class:"ml-4 mt-1 text-gray-400"},gt={class:"text-gray-500",style:{"font-weight":"500"}},ft={class:"mb-8 inline-flex text-indigo-300"},pt=["onClick"],vt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"},null,-1),xt=[vt],kt=t("hr",null,null,-1),bt={class:"col-span-6"},yt={key:1},wt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ct={class:"container my-2 rounded-sm shadow-sm bg-purple-100 border-l-4 border-purple-500 text-purple-700 p-4",role:"alert"},Lt=t("p",null,"Unase a nuestra comunidad para poder comentar 🗣️🫂",-1),St=["href","active"],Nt=["href","active"];function jt(r,i,e,l,x,_){const g=u("InputLabel"),v=u("PrimaryButton"),m=u("Link"),h=u("FormSection2");return n(),a("div",J,[t("h2",K,[f(c(e.comments.length)+" ",1),e.comments.length==1?(n(),a("span",Q,"Comentario")):(n(),a("span",X,"Comentarios"))]),(n(!0),a(b,null,y(e.comments,s=>(n(),a("div",{key:s.id},[s.parent_comment_id?C("",!0):(n(),a("div",Y,[t("div",tt,[t("img",{class:"h-8 w-8 rounded-full",src:s.user&&s.user.profile_photo_path?"/image/"+s.user.profile_photo_path:"/image/profile-photos/default.jpg",alt:""},null,8,et),t("span",ot,c(s.user&&s.user.name?s.user.name:"Usuario inactivo"),1),t("span",st,c(_.formatDate(s.created_at)),1)]),t("p",nt,c(s.text),1),t("p",rt,[t("small",null,c(s.likes),1),(n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 ml-1 cursor-pointer",style:{"margin-top":"3px"},onClick:o=>l.likeComment(s.id)},lt,8,at)),t("small",{class:"ml-2 cursor-pointer",onClick:o=>l.replyToComment(s.id)},"Responder",8,ct)])])),(n(!0),a(b,null,y(e.comments,o=>(n(),a("div",{key:o.id,class:"ml-8"},[o.parent_comment_id==s.id?(n(),a("div",dt,[t("div",mt,[t("img",{class:"h-8 w-8 rounded-full",src:o.user&&o.user.profile_photo_path?"/image/"+o.user.profile_photo_path:"/image/profile-photos/default.jpg",alt:""},null,8,ut),t("span",_t,c(o.user&&o.user.name?o.user.name:"Usuario inactivo"),1),t("span",ht,c(_.formatDate(o.created_at)),1)]),t("p",gt,c(o.text),1),t("p",ft,[t("small",null,c(o.likes),1),(n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 ml-1 cursor-pointer",style:{"margin-top":"3px"},onClick:L=>l.likeComment(o.id)},xt,8,pt))])])):C("",!0)]))),128))]))),128)),kt,l.isLoggedIn?(n(),k(h,{key:0,onSubmitted:l.submit},{form:d(()=>[t("div",bt,[l.replyingTo!==null?(n(),k(g,{key:0,for:""},{default:d(()=>[f(" Responder a "),t("strong",null,c(e.comments.find(s=>s.id===l.replyingTo).user.name),1),t("button",{onClick:i[0]||(i[0]=(...s)=>l.cancelReply&&l.cancelReply(...s)),class:"ml-2 text-red-500 hover:text-red-700"},"Cancelar respuesta")]),_:1})):(n(),k(g,{key:1,for:""},{default:d(()=>[f("Comentar")]),_:1})),I(t("textarea",{maxlength:"200",id:"comment-textarea","onUpdate:modelValue":i[1]||(i[1]=s=>l.form.text=s),class:"p-3 h-48 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm w-full"},null,512),[[$,l.form.text]]),t("p",null,"Caracteres restantes: "+c(_.caracteresRestantes),1)])]),actions:d(()=>[p(v,{class:"link-button-default mb-3 hover:text-gray-100 mt-2 hover:cursor-pointer",onClick:j(l.submit,["prevent"])},{default:d(()=>[f("Publicar")]),_:1},8,["onClick"])]),default:d(()=>[p(m,{as:"button",class:"link-button-default mb-3 hover:text-gray-100",href:r.route("post.edit",1)},{default:d(()=>[f("Publicar")]),_:1},8,["href"])]),_:1},8,["onSubmitted"])):(n(),a("div",yt,[t("div",wt,[t("div",Ct,[Lt,t("a",{href:r.route("login"),active:r.route().current("login"),class:"link-button-default mb-3 hover:text-gray-100 mt-2 hover:cursor-pointer"}," Unirse ",8,St),t("a",{href:r.route("register"),active:r.route().current("register"),class:"ml-4 link-button-default mb-3 hover:text-gray-100 mt-2 hover:cursor-pointer"}," Registrarse ",8,Nt)])])]))])}const Bt=D(G,[["render",jt]]),Tt={methods:{formatDate(r){const i=new Date(r);let e={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(void 0,e).format(i)}},components:{Link:B,BlogLayout:O,Pagination:P,NavLink:T,ResponsiveNavLink:U,CommentSection:Bt,Head:V},props:{post:Object,categories:Object,comments:Object,user:String}},Dt={class:"hidden space-x-8 sm:-my-px sm:ms-4 sm:flex h-full"},Ht=["src"],Rt=["src"],Ft={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},It={class:"container mt-5 m-auto p-5"},$t={key:0,class:"content-center"},Mt={class:"mb-8 mt-4 text-4xl font-bold tracking-tight text-gray-900 dark:text-white"},Vt=["src"],Ot={class:"mb-8"},Pt={class:"inline-flex text-gray-500 mb-8"},Ut=["src"],Et={class:"mt-2 font-semibold"},Zt={class:"text-sm text-gray-300 font-thin"},zt=["innerHTML"],At={key:1},qt=t("div",{class:"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 mt-8",role:"alert"},[t("p",null,"Ups! No tenemos ni idea donde está este artículo...")],-1),Wt=[qt],Gt=t("hr",{class:"mb-0"},null,-1);function Jt(r,i,e,l,x,_){const g=u("Head"),v=u("NavLink"),m=u("ResponsiveNavLink"),h=u("CommentSection"),s=u("BlogLayout");return n(),k(s,null,{catnavs:d(()=>[(n(!0),a(b,null,y(e.categories,o=>(n(),a("div",{key:o.id},[t("div",Dt,[p(v,{href:r.route("blog.category",o.title),active:r.route().current("blog.category",o.title)},{default:d(()=>[t("img",{class:"h-4 w-4",src:"/image/category/"+o.image},null,8,Ht)]),_:2},1032,["href","active"])])]))),128))]),catnavs_responsive:d(()=>[(n(!0),a(b,null,y(e.categories,o=>(n(),a("div",{key:o.id},[p(m,{href:r.route("blog.category",o.title),active:r.route().current("blog.category",o.title)},{default:d(()=>[t("img",{class:"h-4 w-4",src:"/image/category/"+o.image},null,8,Rt)]),_:2},1032,["href","active"])]))),128))]),default:d(()=>[p(g,{title:e.post.title},null,8,["title"]),t("div",Ft,[t("div",It,[e.post?(n(),a("div",$t,[t("h5",Mt,c(e.post.title),1),t("img",{class:"transition-all object-cover w-full rounded-lg",src:"/image/post/"+e.post.image,alt:""},null,8,Vt),t("p",Ot,[t("small",null,c(_.formatDate(e.post.created_at)),1)]),t("div",Pt,[t("img",{class:"h-8 w-8 rounded-full mr-3",src:"/image/author/"+e.post.author.image},null,8,Ut),t("small",Et,[f(c(e.post.author.name),1),t("span",Zt," - "+c(e.post.author.description),1)])]),t("p",{style:{fontFamily:"IBM",fontWeight:"normal",fontStyle:"normal"},class:"mb-3 max-w-xl text-xl leading-relaxed font-normal text-gray-700 dark:text-gray-400",innerHTML:e.post.text},null,8,zt)])):(n(),a("div",At,Wt))]),Gt,p(h,{post_id:e.post.id,comments:e.comments,user:e.user},null,8,["post_id","comments","user"])])]),_:1})}const oe=D(Tt,[["render",Jt]]);export{oe as default};
