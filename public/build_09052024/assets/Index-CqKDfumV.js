import{C as A,O as k,i as L,p as h,D as T,o as s,d as r,b as i,w as d,e as n,a as t,k as g,q as y,F as c,f as p,t as m,g as C}from"./app-BjkeQK_V.js";import{_ as B}from"./AppLayout-BfpUR-_8.js";import{P as I}from"./Pagination-D3BNdIm4.js";import{_ as U}from"./ConfirmationModal-LtHFOSOg.js";import{_ as E}from"./PrimaryButton-DuRU8ejc.js";import{_ as N}from"./TextInput-CDfIOJxr.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BQJW1pNG.js";import"./Modal-5WPsUn51.js";const q={directives:{debounce:A({lock:!0})},props:{posts:Object,authors:Object,categories:Object,enumPosted:Array,enumType:Array,filter_author_id:String,filter_category_id:String,filter_type:String,filter_posted:String,filter_search:String,filter_from:String,filter_to:String,sortColumn:String,sortDirection:String},data(a){return{confirmDeleteActive:!1,deletePostRow:"",author_id:a.filter_author_id,posted:a.filter_posted,type:a.filter_type,category_id:a.filter_category_id,search:a.filter_search,from:a.filter_from,to:a.filter_to,column:""}},methods:{deletePost(){k.delete(route("post.destroy",this.deletePostRow)),this.confirmDeleteActive=!1},customSearch(a="id"){k.get(route("post.index"),{category_id:this.category_id,author_id:this.author_id,posted:this.posted,type:this.type,search:this.search,from:this.from,to:this.to,sortColumn:this.column,sortDirection:this.sortDirection=="asc"?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},sort(a){this.column=a,this.customSearch()}},components:{Link:L,AppLayout:B,Pagination:I,ConfirmationModal:U,PrimaryButton:E,TextInput:N},setup(a){}},j=t("p",null,"¿Seguro que quieres eliminar el post?",-1),F=t("div",{class:"mr-3"},null,-1),R={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},M={class:"container mt-5"},H={class:"card mb-10"},z={class:"card-body"},G=t("h2",{class:"mb-2 text-xl font-semibold text-gray-900 dark:text-white"},"Posts",-1),J=t("h2",{class:"mb-2 font-semibold text-gray-900 dark:text-white"},"Busqueda",-1),K={class:""},Q={class:"grid grid-cols-4 gap-2 mb-5"},W=t("option",{value:null},"-",-1),X=["value","selected"],Y=t("option",{value:null},"-",-1),Z=["value"],$=t("option",{value:null},"-",-1),ee=["value"],te=t("option",{value:null},"-",-1),oe=["value"],se=t("div",null,null,-1),re={class:"mb-5"},ne={key:0},le=t("h2",{class:"mb-2 font-semibold text-gray-900 dark:text-white"},"Listado",-1),ie={class:"w-full border"},de={class:"bg-gray-200"},ae={class:"border-b"},ue=t("th",{class:"p-3"},"Autor",-1),ce=t("th",{class:"p-3"},"Categoría",-1),_e=t("th",{class:"p-3"},"Estado",-1),me=t("th",{class:"p-3"},"#",-1),he={class:"p-2"},fe={class:"p-2"},ge=["src"],pe={class:"p-2 font-bold"},ye={class:"p-2"},ve={class:"p-2"},be={key:0},xe={class:"bg-green-100 text-green-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300"},ke={key:1},Ce={class:"bg-orange-100 text-orange-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-orange-900 dark:text-orange-300"},Se={key:2},we={class:"bg-red-100 text-red-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300"},De={class:"p-2"},Ve=["onClick"],Pe={key:1},Ae=t("div",{class:"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4",role:"alert"},[t("p",null,"No hay posts")],-1),Le=[Ae];function Te(a,o,_,Be,l,u){const x=h("o-button"),S=h("confirmation-modal"),v=h("Link"),f=h("InputLabel"),b=h("TextInput"),w=h("PrimaryButton"),D=h("pagination"),V=h("AppLayout"),P=T("debounce");return s(),r(c,null,[i(S,{show:l.confirmDeleteActive},{title:d(()=>[n(" Confirme la acción ")]),content:d(()=>[j]),footer:d(()=>[i(x,{variant:"danger",onClick:u.deletePost},{default:d(()=>[n("Eliminar")]),_:1},8,["onClick"]),F,i(x,{onClick:o[0]||(o[0]=e=>l.confirmDeleteActive=!1)},{default:d(()=>[n("Cancelar")]),_:1})]),_:1},8,["show"]),i(V,null,{default:d(()=>[t("div",R,[t("div",M,[t("div",H,[t("div",z,[G,i(v,{class:"link-button-default mb-3 hover:text-gray-100",href:a.route("post.create")},{default:d(()=>[n("Crear nuevo")]),_:1},8,["href"]),J,t("div",K,[i(f,{for:""},{default:d(()=>[n("Texto")]),_:1}),g(i(b,{"debounce-events":["change","keyup"],autofocus:"",class:"w-full",type:"text",modelValue:l.search,"onUpdate:modelValue":o[1]||(o[1]=e=>l.search=e)},null,8,["modelValue"]),[[P,u.customSearch,"350ms"]])]),t("div",Q,[t("div",null,[i(f,{for:""},{default:d(()=>[n("Desde")]),_:1}),i(b,{onChange:u.customSearch,class:"w-full",modelValue:l.from,"onUpdate:modelValue":o[2]||(o[2]=e=>l.from=e),placeholder:"Desde...",type:"date"},null,8,["onChange","modelValue"])]),t("div",null,[i(f,{for:""},{default:d(()=>[n("Hasta")]),_:1}),i(b,{onChange:u.customSearch,class:"w-full",modelValue:l.to,"onUpdate:modelValue":o[3]||(o[3]=e=>l.to=e),placeholder:"Desde...",type:"date"},null,8,["onChange","modelValue"])]),t("div",null,[i(f,{for:""},{default:d(()=>[n("Estado")]),_:1}),g(t("select",{onChange:o[4]||(o[4]=(...e)=>u.customSearch&&u.customSearch(...e)),class:"rounded-md w-full border-gray-300","onUpdate:modelValue":o[5]||(o[5]=e=>l.posted=e)},[n("7 "),W,(s(!0),r(c,null,p(_.enumPosted,e=>(s(),r("option",{key:e,value:e,selected:l.posted==e},m(e),9,X))),128))],544),[[y,l.posted]])]),t("div",null,[i(f,{for:""},{default:d(()=>[n("Tipo")]),_:1}),g(t("select",{onChange:o[6]||(o[6]=(...e)=>u.customSearch&&u.customSearch(...e)),class:"rounded-md w-full border-gray-300","onUpdate:modelValue":o[7]||(o[7]=e=>l.type=e)},[Y,(s(!0),r(c,null,p(_.enumType,e=>(s(),r("option",{key:e,value:e},m(e),9,Z))),128))],544),[[y,l.type]])]),t("div",null,[i(f,{for:""},{default:d(()=>[n("Autor")]),_:1}),g(t("select",{onChange:o[8]||(o[8]=(...e)=>u.customSearch&&u.customSearch(...e)),class:"rounded-md w-full border-gray-300","onUpdate:modelValue":o[9]||(o[9]=e=>l.author_id=e)},[$,(s(!0),r(c,null,p(_.authors,e=>(s(),r("option",{key:e.id,value:e.id},m(e.name),9,ee))),128))],544),[[y,l.author_id]])]),t("div",null,[i(f,{for:""},{default:d(()=>[n("Categoría")]),_:1}),g(t("select",{onChange:o[10]||(o[10]=(...e)=>u.customSearch&&u.customSearch(...e)),class:"rounded-md w-full border-gray-300","onUpdate:modelValue":o[11]||(o[11]=e=>l.category_id=e)},[te,(s(!0),r(c,null,p(_.categories,e=>(s(),r("option",{key:e.id,value:e.id},m(e.title),9,oe))),128))],544),[[y,l.category_id]])]),se]),t("div",re,[t("div",null,[i(w,{onClick:u.customSearch},{default:d(()=>[n(" Filtrar ")]),_:1},8,["onClick"]),i(v,{class:"ml-3 text-gray-700 hover:text-gray-500",href:a.route("post.index")},{default:d(()=>[n(" Borrar filtros ")]),_:1},8,["href"])])]),_.posts.data.length>0?(s(),r("div",ne,[le,t("table",ie,[t("thead",de,[t("tr",ae,[t("th",{class:"p-3 min-w-14 hover:bg-gray-300 cursor-pointer",onClick:o[12]||(o[12]=e=>u.sort("id"))},[n(" Id "),_.sortColumn=="id"?(s(),r(c,{key:0},[_.sortDirection=="desc"?(s(),r(c,{key:0},[n("↑")],64)):(s(),r(c,{key:1},[n("↓")],64))],64)):C("",!0)]),ue,t("th",{class:"p-3 hover:bg-gray-300 cursor-pointer",onClick:o[13]||(o[13]=e=>u.sort("title"))},[n(" Titulo "),_.sortColumn=="title"?(s(),r(c,{key:0},[_.sortDirection=="desc"?(s(),r(c,{key:0},[n("↑")],64)):(s(),r(c,{key:1},[n("↓")],64))],64)):C("",!0)]),ce,_e,me])]),t("tbody",null,[(s(!0),r(c,null,p(_.posts.data,e=>(s(),r("tr",{class:"border-b",key:e.id},[t("td",he,m(e.id),1),t("td",fe,[t("span",null,[t("img",{class:"h-8 w-8 rounded-full",src:"/image/author/"+e.author.image},null,8,ge),n(" "+m(e.author.name),1)])]),t("td",pe,m(e.title.substring(0,100)+"..."),1),t("td",ye,m(e.category.title),1),t("td",ve,[e.posted=="publicado"?(s(),r("div",be,[t("span",xe,m(e.posted),1)])):e.posted=="pendiente"?(s(),r("div",ke,[t("span",Ce,m(e.posted),1)])):(s(),r("div",Se,[t("span",we,m(e.posted),1)]))]),t("td",De,[i(v,{as:"button",class:"text-sm text-purple-400 hover:text-purple-700 mx-2",href:a.route("post.edit",e.id)},{default:d(()=>[n("Editar")]),_:2},1032,["href"]),t("button",{class:"text-sm text-red-400 hover:text-red-700 mx-2",onClick:Ie=>{l.confirmDeleteActive=!0,l.deletePostRow=e.id}},"Eliminar",8,Ve)])]))),128))])]),i(D,{links:_.posts},null,8,["links"])])):(s(),r("div",Pe,Le))])])])])]),_:1})],64)}const He=O(q,[["render",Te]]);export{He as default};
