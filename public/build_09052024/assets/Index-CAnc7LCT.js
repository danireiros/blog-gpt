import{C as D,i as I,O as h,r as f,p as d,D as S,o,d as n,b as i,w as l,e as _,a as e,t as m,k as T,F as b,f as L,g as x}from"./app-BjkeQK_V.js";import{_ as V}from"./AppLayout-BfpUR-_8.js";import{P as A}from"./PaginationPrevNext-SHUBRfEr.js";import{_ as N}from"./ConfirmationModal-LtHFOSOg.js";import{_ as P}from"./TextInput-CDfIOJxr.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BQJW1pNG.js";import"./Modal-5WPsUn51.js";const F={directives:{debounce:D({lock:!0})},components:{Link:I,AppLayout:V,Pagination:A,ConfirmationModal:N,TextInput:P},props:{users:Object,filter_search:String},data(s){return{confirmBanUser:!1,banUser:"",search:s.filter_search}},methods:{formatDate(s){const a=new Date(s);let c={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};return new Intl.DateTimeFormat(void 0,c).format(a)},banCurrentUser(){h.post(route("user.ban",this.banUser)),this.confirmBanUser=!1},customSearch(){h.get(route("user.index"),{search:this.search},{preserveState:!0,preserveScroll:!0})}},setup(s){return f(""),f(""),{profilePhoto:c=>c.replace(/.*\/profile-photos/,"/image/profile-photos")}}},M=e("div",{class:"mr-3"},null,-1),O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},E={class:"container mt-5"},R={class:"card"},j={class:"card-body"},z=e("h2",{class:"mb-2 text-xl font-semibold text-gray-900 dark:text-white"},"Usuarios",-1),G={class:""},H={key:0},J={class:"w-full border"},K=e("thead",{class:"bg-gray-200"},[e("tr",{class:"border-b"},[e("th",{class:"p-3"},"ID"),e("th",{class:"p-3"},"Avatar"),e("th",{class:"p-3"},"Nombre"),e("th",{class:"p-3"},"Email"),e("th",{class:"p-3"},"Rol"),e("th",{class:"p-3"},"Fecha de creación"),e("th",{class:"p-3"},"#")])],-1),Q={class:"p-2"},W={class:"p-2"},X=["src"],Y={class:"p-2"},Z={class:"p-2"},$={class:"p-2"},ee={key:0},te={key:1,class:"text-red-600"},se={key:2,class:"font-bold text-indigo-600"},oe={class:"p-2"},ne={key:0,class:"p-2"},re=["onClick"],ae={key:1,class:"p-2"},ce=["onClick"];function ie(s,a,c,v,r,u){const p=d("o-button"),g=d("confirmation-modal"),k=d("InputLabel"),y=d("TextInput"),U=d("pagination"),C=d("AppLayout"),w=S("debounce");return o(),n(b,null,[i(g,{show:r.confirmBanUser},{title:l(()=>[_(" Confirme la acción ")]),content:l(()=>[e("p",null,m(s.banModalText)+m(s.currentUser)+"?",1)]),footer:l(()=>[i(p,{variant:"danger",onClick:u.banCurrentUser},{default:l(()=>[_("Aceptar")]),_:1},8,["onClick"]),M,i(p,{onClick:a[0]||(a[0]=t=>r.confirmBanUser=!1)},{default:l(()=>[_("Cancelar")]),_:1})]),_:1},8,["show"]),i(C,null,{default:l(()=>[e("div",O,[e("div",E,[e("div",R,[e("div",j,[z,e("div",G,[i(k,{for:""},{default:l(()=>[_("Nombre o email")]),_:1}),T(i(y,{"debounce-events":["change","keyup"],autofocus:"",class:"w-full mb-4",type:"text",modelValue:r.search,"onUpdate:modelValue":a[1]||(a[1]=t=>r.search=t)},null,8,["modelValue"]),[[w,u.customSearch,"350ms"]])]),c.users.data.length>0?(o(),n("div",H,[e("table",J,[K,e("tbody",null,[(o(!0),n(b,null,L(c.users.data,t=>(o(),n("tr",{class:"border-b",key:t.id},[e("td",Q,m(t.id),1),e("td",W,[e("img",{class:"h-8 w-8 rounded-full",src:v.profilePhoto(t.profile_photo_url),alt:""},null,8,X)]),e("td",Y,m(t.name),1),e("td",Z,m(t.email),1),e("td",$,[t.role==2?(o(),n("span",ee,"Usuario")):t.role==3?(o(),n("span",te,"Baneado")):(o(),n("span",se,"Admin"))]),e("td",oe,m(u.formatDate(t.created_at)),1),t.role==2?(o(),n("td",ne,[e("button",{class:"text-sm text-red-400 hover:text-red-700 mx-2",onClick:B=>{r.confirmBanUser=!0,r.banUser=t.id,s.currentUser=t.name,s.banModalText="¿Seguro que quieres banear a "}},"Banear",8,re)])):t.role==3?(o(),n("td",ae,[e("button",{class:"text-sm text-green-400 hover:text-green-700 mx-2",onClick:B=>{r.confirmBanUser=!0,r.banUser=t.id,s.currentUser=t.name,s.banModalText="¿Seguro que quieres reincorporar a "}},"Reincorporar",8,ce)])):x("",!0)]))),128))])]),i(U,{links:c.users},null,8,["links"])])):x("",!0)])])])])]),_:1})],64)}const be=q(F,[["render",ie]]);export{be as default};
